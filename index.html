<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orient'Maroc - Guide des M√©tiers et Orientation</title>
    <!-- Lien vers le fichier CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- MODAL DETAIL -->
    <div class="modal" id="jobModal">
        <div class="modal-content">
            <span class="close-modal" onclick="window.app.closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <header>
        <div class="container">
            <nav>
                <div class="logo">üá≤üá¶ Orient<span>Maroc</span></div>
                <div class="nav-links" id="navLinks" style="display:none;">
                    <button onclick="window.app.navigate('dashboard')">Accueil</button>
                    <button onclick="window.app.navigate('jobs')">M√©tiers</button>
                    <button onclick="window.app.navigate('comparator')">Comparateur</button>
                    <a href="m√©tiers.html">
                        <button>M√©tiers par branche </button>
                    </a>
                    <a href="√©coles/premier.html">
                        <button>Ecoles et universit√©s </button>
                    </a>

                    <button onclick="window.app.logout()">Quitter</button>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">

        <!-- 1. AUTHENTIFICATION -->
        <section id="auth" class="active">
            <div class="card" style="max-width: 500px; margin: 50px auto; text-align: center;">
                <h2 style="color: var(--primary); margin-bottom: 10px;">Bienvenue sur Orient'Maroc</h2>
                <p style="color: #666; margin-bottom: 30px;">La plateforme d'orientation scolaire et professionnelle.
                </p>

                <div id="authTabs"
                    style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #eee;">
                    <button class="auth-tab active" onclick="switchAuthTab('login')"
                        style="flex: 1; padding: 10px; border: none; background: none; font-weight: bold; color: var(--primary); border-bottom: 3px solid var(--primary);">Connexion</button>
                    <button class="auth-tab" onclick="switchAuthTab('register')"
                        style="flex: 1; padding: 10px; border: none; background: none; font-weight: bold; color: #999;">Inscription</button>
                </div>

                <!-- TAB LOGIN -->
                <div id="loginForm" style="display: block;">
                    <form onsubmit="window.login(event)" style="text-align: left;">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="loginEmail" required placeholder="exemple@email.com">
                        </div>
                        <div class="form-group">
                            <label>Mot de passe</label>
                            <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center;">Se
                            Connecter</button>
                    </form>
                </div>

                <!-- TAB REGISTER -->
                <div id="registerForm" style="display: none;">
                    <form onsubmit="window.register(event)" style="text-align: left;">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="registerEmail" required placeholder="exemple@email.com">
                        </div>
                        <div class="form-group">
                            <label>Mot de passe</label>
                            <input type="password" id="registerPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <div class="form-group">
                            <label>Confirmer le mot de passe</label>
                            <input type="password" id="confirmPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <button type="submit" class="btn btn-primary"
                            style="width: 100%; justify-content: center;">S'Inscrire</button>
                    </form>
                </div>

                <!-- DIVIDER -->
                <div style="margin: 20px 0; color: #999; font-size: 0.9rem;">Ou</div>

                <!-- GOOGLE LOGIN -->
                <button class="btn btn-outline" onclick="window.googleLogin()"
                    style="width: 100%; justify-content: center;">
                    üîê Connexion avec Google
                </button>
            </div>
        </section>

        <!-- 2. ONBOARDING -->
        <section id="onboarding">
            <div class="card" style="max-width: 500px; margin: 50px auto; text-align: center;">
                <h2 style="color: var(--primary); margin-bottom: 10px;">Bienvenue sur Orient'Maroc</h2>
                <p style="color: #666; margin-bottom: 30px;">La plateforme d'orientation scolaire et professionnelle.
                </p>

                <form onsubmit="window.app.saveProfile(event)">
                    <div class="form-group" style="text-align: left;">
                        <label>Ton Pr√©nom</label>
                        <input type="text" id="name" required placeholder="Ex: Sara">
                    </div>

                    <div class="form-group" style="text-align: left;">
                        <label>Niveau Scolaire</label>
                        <select id="level" required onchange="window.app.toggleStream()">
                            <option value="">Choisir...</option>
                            <option value="3AC">3√®me Ann√©e Coll√®ge</option>
                            <option value="TC">Tronc Commun</option>
                            <option value="1BAC">1√®re Ann√©e Bac</option>
                            <option value="2BAC">2√®me Ann√©e Bac</option>
                        </select>
                    </div>

                    <div class="form-group" id="streamGroup" style="display:none; text-align: left;">
                        <label>Fili√®re (Bac)</label>
                        <select id="stream">
                            <option value="">Aucune / Je ne sais pas</option>
                            <option value="SC_Maths">Sciences Maths</option>
                            <option value="SC_Exp">Sciences Exp√©rimentales</option>
                            <option value="STEG">Sciences Techniques (STEG)</option>
                            <option value="EG">√âconomie & Gestion</option>
                            <option value="SH">Sciences Humaines</option>
                            <option value="LP">Lettres & Philo</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary"
                        style="width: 100%; justify-content: center;">Commencer</button>
                </form>
            </div>
        </section>

        <!-- 2. DASHBOARD -->
        <section id="dashboard">
            <div class="card"
                style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white;">
                <h1>Salut, <span id="uName">√âl√®ve</span> ! üëã</h1>
                <p style="opacity: 0.9; margin-top: 5px;">Pr√™t √† d√©couvrir ton avenir professionnel au Maroc ?</p>
                <div style="margin-top: 20px;">
                    <button class="btn" style="background: white; color: var(--primary);"
                        onclick="window.location.href='test/test.html'">Passer le Test d'Orientation</button>
                </div>
            </div>

            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 30px;">
                <div class="stat-box">
                    <div class="stat-val" id="totalJobsCount">0</div>
                    <div class="stat-label">M√©tiers</div>
                </div>
                <div class="stat-box">
                    <div class="stat-val" id="totalCatsCount">0</div>
                    <div class="stat-label">Secteurs</div>
                </div>
            </div>

            <h3 style="margin-bottom: 15px;">Suggestion du jour</h3>
            <div class="job-grid" id="featuredJobs"></div>
        </section>

        <!-- 3. QUIZ -->
        <section id="quiz">
            <div class="card">
                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgress"></div>
                </div>
                <h2 id="qText" style="margin-bottom: 20px;">Question...</h2>
                <div id="qOptions" class="options-grid"></div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-outline" onclick="window.app.navigate('dashboard')">Annuler</button>
            </div>
        </section>

        <!-- 4. RESULTS -->
        <section id="results">
            <div class="card" style="text-align: center;">
                <h2 style="color: var(--primary);">Analyse Termin√©e üéØ</h2>
                <p>Voici des pistes bas√©es sur ton profil : <strong id="resProfile"></strong></p>
            </div>

            <div class="card">
                <h3>üèÜ Profils d√©tect√©s</h3>
                <div id="resTags" style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;"></div>
            </div>

            <div class="card">
                <h3>üíº M√©tiers recommand√©s pour toi</h3>
                <p style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">Bas√©s sur ta fili√®re scolaire (<span
                        id="resStream"></span>) et tes r√©ponses au quiz.</p>
                <div class="job-grid" id="resJobs"></div>
            </div>

            <div style="text-align: center;">
                <button class="btn btn-primary" onclick="window.app.navigate('dashboard')">Retour Accueil</button>
            </div>
        </section>

        <!-- 5. JOBS DIRECTORY -->
        <section id="jobs">
            <div class="filter-container">
                <label>üîé Filtrer par secteur :</label>
                <select id="categoryFilter" onchange="window.app.filterJobs(this.value)">
                    <option value="all">Toutes les cat√©gories</option>
                    <!-- Options inject√©es par JS -->
                </select>
                <div style="color: #888; font-size: 0.9rem;"><span id="currentCount">0</span> m√©tiers affich√©s</div>
            </div>
            <div class="job-grid" id="jobsList"></div>
        </section>

        <!-- 6. COMPARATOR SECTION -->
        <section id="comparator">
            <div class="card">
                <h2 style="color: var(--primary); margin-bottom: 10px;">‚öñÔ∏è Comparateur de Fili√®res</h2>
                <p style="margin-bottom: 20px; color: #666;">Comparez diff√©rentes voies pour prendre la meilleure
                    d√©cision avant de choisir ton orientation.</p>

                <div class="compare-controls">
                    <div class="select-group">
                        <label>Choisir 1re voie :</label>
                        <select id="streamSelect1" class="form-control">
                            <option value="">-- S√©lectionner --</option>
                            <option value="sc_maths">Sciences Maths</option>
                            <option value="sc_exp">Sciences Exp√©rimentales (PC/SVT)</option>
                            <option value="eco">√âconomie & Gestion</option>
                            <option value="lettres">Lettres & Philosophie</option>
                            <option value="univ">Universit√© (Fili√®re Litt√©raire/Sc Humaines)</option>
                            <option value="ecoles">√âcoles Sup√©rieures (Ing√©nierie/Commerce)</option>
                            <option value="ofppt">OFPPT (Formation Pro)</option>
                        </select>
                    </div>

                    <div class="select-group">
                        <label>Choisir 2e voie :</label>
                        <select id="streamSelect2" class="form-control">
                            <option value="">-- S√©lectionner --</option>
                            <option value="sc_maths">Sciences Maths</option>
                            <option value="sc_exp">Sciences Exp√©rimentales (PC/SVT)</option>
                            <option value="eco">√âconomie & Gestion</option>
                            <option value="lettres">Lettres & Philosophie</option>
                            <option value="univ">Universit√© (Fili√®re Litt√©raire/Sc Humaines)</option>
                            <option value="ecoles">√âcoles Sup√©rieures (Ing√©nierie/Commerce)</option>
                            <option value="ofppt">OFPPT (Formation Pro)</option>
                        </select>
                    </div>

                    <button class="btn btn-primary" onclick="window.app.comparator.runComparison()">Comparer</button>
                </div>
            </div>

            <div id="compareResults" class="compare-grid"></div>

            <div style="text-align: center; margin-top: 30px;">
                <p style="margin-bottom: 10px;">Ind√©cis ? Passez notre test personnalis√© pour une analyse pr√©cise.</p>
                <button class="btn btn-outline" onclick="window.app.startQuiz()">Faire le test d'orientation</button>
            </div>
        </section>

    </main>

    <!-- Script de js -->

    <!-- Firebase SDK (v9 Compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <!-- Config and Main logic -->
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>

</body>

</html>